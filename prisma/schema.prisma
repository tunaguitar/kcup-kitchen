// This is your Prisma schema file,
// learn more about it in the docs: https://pris.ly/d/prisma-schema

generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "sqlite"
  url      = "file:dev.db"
}

model User {
  id     String @id @default(uuid())
  email String  @unique

  fName  String
  lName String
  phone String

  isAdmin Boolean @default(false)

  orders Order[]
}

model Order {
    id    String @id @default(uuid())

    userId String
    user User? @relation(fields: [userId], references: [id])

    items OrderedItem[]

    @@unique([id, userId])

}

model OrderedItem {
  orderId String
  order Order @relation(fields: [orderId], references: [id])

  itemId String
  item MenuItem @relation(fields: [itemId], references: [id])

  quantity Int 

  // chosenOptions ItemOptions[]

  @@id([orderId, itemId])
}


/// missing image (optional)
model MenuItem {
  id    String @id @default(uuid())

  name  String
  price Float
  description String?

  // options ItemOptions[]

  minQuantity Int
  maxQuantity Int?

  orderedItems OrderedItem[]

  typeId String
  type MenuType @relation(fields:[typeId], references: [id])
}

// model ItemOptions {
//   itemId String
//   item MenuItem

//   description String

//   order Order
// }

model MenuType {
  id String @id @default(uuid())
  
  name String @unique

  item MenuItem[]
}
